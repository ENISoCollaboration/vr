<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.

and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"

        >

<h:head>
</h:head>

<h:body>


    <ui:composition template="#{vr.themePath}/templates/private-template.xhtml">
        <ui:define name="content">
            <h:form id="buttonsForm">
                <p:confirmDialog message="Are you sure, you want to delete ?" header="Initiating deleting process"
                                 widgetVar="confirmationDelete">
                    <p:commandButton value="Yes Sure" onclick="PF('confirmationDelete').hide();
                                processOnDeleteCurrent();"/>
                    <p:commandButton value="Not Yet" onclick="PF('confirmationDelete').hide()" type="button"/>
                </p:confirmDialog>

                <!-- /.row -->
                <!--                    <div class="row">
                                        <p:outputLabel id="buttons">
                                            <p:commandButton value="Rafr." icon="ui-ribbonicon-refresh" styleClass="ui-ribbon-bigbutton vr-icon-aws" ajax="true" actionListener="# {allTeachersCourseLoadCtrl.onRefresh}"  update=":listForm"/>
                                        </p:outputLabel>
                                    </div>-->


                <!-- /.row -->
            </h:form>
            <h:form id="genForm">
                <p:growl id="growl" showDetail="true" sticky="true"/>
                <p:commandButton value="Génerer Charge" style="margin-right: 10px"
                                 actionListener="#{allTeachersCourseLoadCtrl.openGenerateDialog}"
                                 update="growl"/>
                <p:commandButton value="Copier Charge" actionListener="#{allTeachersCourseLoadCtrl.openCopyDialog}"
                                 update="growl"/>

                <p:separator/>

                <div class="row">
                    <p:outputLabel value="Période" style="margin-right: 10px;vertical-align: super;"/>
                    <p:selectOneMenu value="#{allTeachersCourseLoadCtrl.model.selectedPeriod}">
                        <p:ajax listener="#{allTeachersCourseLoadCtrl.onChangePeriod}" update=":buttonsForm :listForm"/>
                        <f:selectItem itemLabel="Selectionner Période..." itemValue=""/>
                        <f:selectItems value="#{allTeachersCourseLoadCtrl.model.periods}"/>
                    </p:selectOneMenu>
                </div>
            </h:form>
            <h:form id="listForm">

                <div class="row">
                    <div class="table-responsive">
                        <p:selectManyCheckbox value="#{allTeachersCourseLoadCtrl.model.columnFilters}" layout="grid"
                                              columns="5" style="margin-left: 5px;margin-right: 7px;">
                            <p:ajax listener="#{allTeachersCourseLoadCtrl.onFiltersChanged}" update=":listForm"/>
                            <f:selectItems value="#{allTeachersCourseLoadCtrl.model.columnFilterItems}"/>
                        </p:selectManyCheckbox>
                    </div>
                    <div class="table-responsive">
                        <p:selectManyCheckbox value="#{allTeachersCourseLoadCtrl.model.refreshFilter}" layout="grid"
                                              columns="5">
                            <p:ajax listener="#{allTeachersCourseLoadCtrl.onRefreshFiltersChanged}" update=":listForm"/>
                            <f:selectItems value="#{allTeachersCourseLoadCtrl.model.refreshFilterItems}"/>
                        </p:selectManyCheckbox>
                    </div>
                </div>
                <ui:repeat value="#{allTeachersCourseLoadCtrl.model.tables}" var="tab">
                    <div class="row">
                        <div class="table-responsive">
                            <h1>#{tab.title}</h1>
                            <p:dataTable var="i" value="#{tab.rows}"
                                         class="table table-bordered table-hover"
                                         paginatorAlwaysVisible="false"
                                         paginator="true"
                                         paginatorPosition="bottom"
                                         rows="10"
                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="10,20,50,100,200,1000"
                                         emptyMessage="Aucune charge"
                                    >
                                <p:column headerText="Enseignant" width="10%">
                                    <h:outputText value="#{i.teacher.contact.fullName}"/>
                                </p:column>

                                <p:column rendered="#{allTeachersCourseLoadCtrl.containsFilter('degree')}"
                                          headerText="grade" width="5%">
                                    <h:outputText value="#{i.teacher.degree.name}"></h:outputText>
                                </p:column>
                                <p:column rendered="#{allTeachersCourseLoadCtrl.containsFilter('situation')}"
                                          headerText="sit." width="5%">
                                    <h:outputText value="#{i.teacher.situation.name}"></h:outputText>
                                </p:column>
                                <p:column rendered="#{allTeachersCourseLoadCtrl.containsFilter('weeks')}"
                                          headerText="# sem." width="5%">
                                    <h:outputText value="#{i.weeks}"><f:convertNumber pattern="#0.#"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('due') and allTeachersCourseLoadCtrl.containsFilter('c')}"
                                        headerText="du C" width="5%" style="background: #{vrColorTable.getBgColor('due')};">
                                    <h:outputText value="#{i.due.c != 0 ? i.due.c : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('due') and allTeachersCourseLoadCtrl.containsFilter('td')}"
                                        headerText="du TD" width="5%" style="background: #{vrColorTable.getBgColor('due')};">
                                    <h:outputText value="#{i.due.td != 0 ? i.due.td : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>
                                <!--<p:column-->
                                <!--rendered="#_{allTeachersCourseLoadCtrl.containsFilter('due') and allTeachersCourseLoadCtrl.containsFilter('tp')}"-->
                                <!--headerText="du TP" width="5%">-->
                                <!--<h:outputText value="#_{i.due.tp != 0 ? i.due.tp : ''}"><f:convertNumber-->
                                <!--pattern="#0.00"/></h:outputText>-->
                                <!--</p:column>-->
                                <!--<p:column-->
                                <!--rendered="#_{allTeachersCourseLoadCtrl.containsFilter('due') and allTeachersCourseLoadCtrl.containsFilter('pm')}"-->
                                <!--headerText="du PM" width="5%">-->
                                <!--<h:outputText value="#_{i.due.pm != 0 ? i.due.pm : ''}"><f:convertNumber-->
                                <!--pattern="#_0.00"/></h:outputText>-->
                                <!--</p:column>-->
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('due') and allTeachersCourseLoadCtrl.containsFilter('eq')}"
                                        headerText="du Eq" width="5%" style="background: #{vrColorTable.getBgColor('due')};">
                                    <h:outputText value="#{i.due.equiv != 0 ? i.due.equiv : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>

                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('value') and allTeachersCourseLoadCtrl.containsFilter('c')}"
                                        headerText="C" width="5%" style="background: #{vrColorTable.getBgColor('value')};">
                                    <h:outputText value="#{i.value.c != 0 ? i.value.c : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('value') and allTeachersCourseLoadCtrl.containsFilter('td')}"
                                        headerText="TD" width="5%" style="background: #{vrColorTable.getBgColor('value')};">
                                    <h:outputText value="#{i.value.td != 0 ? i.value.td : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('value') and allTeachersCourseLoadCtrl.containsFilter('tp')}"
                                        headerText="TP" width="5%" style="background: #{vrColorTable.getBgColor('value')};">
                                    <h:outputText value="#{i.value.tp != 0 ? i.value.tp : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('value') and allTeachersCourseLoadCtrl.containsFilter('pm')}"
                                        headerText="PM" width="5%" style="background: #{vrColorTable.getBgColor('value')};">
                                    <h:outputText value="#{i.value.pm != 0 ? i.value.pm : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('value') and allTeachersCourseLoadCtrl.containsFilter('tppm')}"
                                        headerText="TP+PM" width="5%" style="background: #{vrColorTable.getBgColor('value')};">
                                    <h:outputText value="#{i.value.tppm != 0 ? i.value.tppm : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('value') and allTeachersCourseLoadCtrl.containsFilter('eq')}"
                                        headerText="Eq" width="5%" style="background: #{vrColorTable.getBgColor('value')};">
                                    <h:outputText value="#{i.value.equiv != 0 ? i.value.equiv : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('extra') and allTeachersCourseLoadCtrl.containsFilter('c')}"
                                        headerText="Supp C" width="5%" style="background: #{vrColorTable.getBgColor('extra')};">
                                    <h:outputText value="#{i.extra.c != 0 ? i.extra.c : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('extra') and allTeachersCourseLoadCtrl.containsFilter('td')}"
                                        headerText="Supp TD" width="5%" style="background: #{vrColorTable.getBgColor('extra')};">
                                    <h:outputText value="#{i.extra.td != 0 ? i.extra.td : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('extra') and allTeachersCourseLoadCtrl.containsFilter('tp')}"
                                        headerText="Supp TP" width="5%" style="background: #{vrColorTable.getBgColor('extra')};">
                                    <h:outputText value="#{i.extra.tp != 0 ? i.extra.tp : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('extra') and allTeachersCourseLoadCtrl.containsFilter('tppm')}"
                                        headerText="Supp PM" width="5%" style="background: #{vrColorTable.getBgColor('extra')};">
                                    <h:outputText value="#{i.extra.tppm != 0 ? i.extra.tppm : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('extra') and allTeachersCourseLoadCtrl.containsFilter('eq')}"
                                        headerText="Supp Eq" width="5%" style="background: #{vrColorTable.getBgColor('extra')};">
                                    <h:outputText value="#{i.extra.equiv != 0 ? i.extra.equiv : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>


                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('dueWeek') and allTeachersCourseLoadCtrl.containsFilter('c')}"
                                        headerText="C" width="5%"  style="background: #{vrColorTable.getBgColor('dueWeek')};">
                                    <h:outputText value="#{i.dueWeek.c != 0 ? i.dueWeek.c : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('dueWeek') and allTeachersCourseLoadCtrl.containsFilter('td')}"
                                        headerText="du TD/sem" width="5%"  style="background: #{vrColorTable.getBgColor('dueWeek')};">
                                    <h:outputText value="#{i.dueWeek.td != 0 ? i.dueWeek.td : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('dueWeek') and allTeachersCourseLoadCtrl.containsFilter('tp')}"
                                        headerText="du TP/sem" width="5%"  style="background: #{vrColorTable.getBgColor('dueWeek')};">
                                    <h:outputText value="#{i.dueWeek.tp != 0 ? i.dueWeek.tp : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('dueWeek') and allTeachersCourseLoadCtrl.containsFilter('pm')}"
                                        headerText="du PM/sem" width="5%"  style="background: #{vrColorTable.getBgColor('dueWeek')};">
                                    <h:outputText value="#{i.dueWeek.pm != 0 ? i.dueWeek.pm : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('dueWeek') and allTeachersCourseLoadCtrl.containsFilter('eq')}"
                                        headerText="du Eq/sem" width="5%"  style="background: #{vrColorTable.getBgColor('dueWeek')};">
                                    <h:outputText
                                            value="#{i.dueWeek.equiv != 0 ? i.dueWeek.equiv : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>


                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('valueWeek') and allTeachersCourseLoadCtrl.containsFilter('c')}"
                                        headerText="C/sem" width="5%" style="background: #{vrColorTable.getBgColor('valueWeek')};">
                                    <h:outputText value="#{i.valueWeek.c != 0 ? i.valueWeek.c : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('valueWeek') and allTeachersCourseLoadCtrl.containsFilter('td')}"
                                        headerText="TD/sem" width="5%" style="background: #{vrColorTable.getBgColor('valueWeek')};">
                                    <h:outputText value="#{i.valueWeek.td != 0 ? i.valueWeek.td : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('valueWeek') and allTeachersCourseLoadCtrl.containsFilter('tp')}"
                                        headerText="TP/sem" width="5%" style="background: #{vrColorTable.getBgColor('valueWeek')};">
                                    <h:outputText value="#{i.valueWeek.tp != 0 ? i.valueWeek.tp : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('valueWeek') and allTeachersCourseLoadCtrl.containsFilter('pm')}"
                                        headerText="PM/sem" width="5%" style="background: #{vrColorTable.getBgColor('valueWeek')};">
                                    <h:outputText value="#{i.valueWeek.pm != 0 ? i.valueWeek.pm : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('valueWeek') and allTeachersCourseLoadCtrl.containsFilter('tppm')}"
                                        headerText="TP+PM/sem" width="5%" style="background: #{vrColorTable.getBgColor('valueWeek')};">
                                    <h:outputText
                                            value="#{i.valueWeek.tppm != 0 ? i.valueWeek.tppm : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('valueWeek') and allTeachersCourseLoadCtrl.containsFilter('eq')}"
                                        headerText="Eq/sem" width="5%" style="background: #{vrColorTable.getBgColor('valueWeek')};">
                                    <h:outputText
                                            value="#{i.valueWeek.equiv != 0 ? i.valueWeek.equiv : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>


                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('extraWeek') and allTeachersCourseLoadCtrl.containsFilter('c')}"
                                        headerText="supp C/sem" width="5%" style="background: #{vrColorTable.getBgColor('extraWeek')};">
                                    <h:outputText value="#{i.extraWeek.c != 0 ? i.extraWeek.c : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('extraWeek') and allTeachersCourseLoadCtrl.containsFilter('td')}"
                                        headerText="supp TD/sem" width="5%" style="background: #{vrColorTable.getBgColor('extraWeek')};">
                                    <h:outputText value="#{i.extraWeek.td != 0 ? i.extraWeek.td : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('extraWeek') and allTeachersCourseLoadCtrl.containsFilter('tp')}"
                                        headerText="supp TP/sem" width="5%" style="background: #{vrColorTable.getBgColor('extraWeek')};">
                                    <h:outputText value="#{i.extraWeek.tp != 0 ? i.extraWeek.tp : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('extraWeek') and allTeachersCourseLoadCtrl.containsFilter('pm')}"
                                        headerText="supp PM/sem" width="5%" style="background: #{vrColorTable.getBgColor('extraWeek')};">
                                    <h:outputText value="#{i.extraWeek.pm != 0 ? i.extraWeek.pm : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>
                                <p:column
                                        rendered="#{allTeachersCourseLoadCtrl.containsFilter('extraWeek') and allTeachersCourseLoadCtrl.containsFilter('eq')}"
                                        headerText="supp Eq/sem" width="5%" style="background: #{vrColorTable.getBgColor('extraWeek')};">
                                    <h:outputText
                                            value="#{i.extraWeek.equiv != 0 ? i.extraWeek.equiv : ''}"><f:convertNumber
                                            pattern="#0.00"/></h:outputText>
                                </p:column>

                            </p:dataTable>
                        </div>

                    </div>
                </ui:repeat>
            </h:form>


        </ui:define>


    </ui:composition>


</h:body>

</html>
