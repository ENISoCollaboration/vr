# Vain Ruling

# 1. Vain Ruling / ENISo info
Vain Ruling is a Open Source Web App Framework for building Plugin Based Extensible Web Application.
A custom application that uses extensively VR is ENISo info which is an Open Source academic platform.

Author  : Taha BEN SALAH


# 2. Eniso.info

## 2.1. How to compile
To compile eniso.info the following projects must be compiled in this order :
1.  **vr-plugin** is the parent plugin project for all vr plugins
2.  **vain-ruling** is the parent project for all VR plugins
2.  **eniso-info** is the eniso.info parent project for all eniso.info academic platform


## 2.2. configuration :
### 2.2.1. Default configuration :
ENSo info uses a default java derby database but can be configured with other rdbms such as mysql. 
You have nothing to configure to use default embedded derby configuration. If one needs to configure
db access a file named upa.xml should be configured accordingly. The file is located at :

${user.home}/workspace/eniso.info/config/upa.xml

### 2.2.2 derby configuration
```xml
<?xml version="1.0" encoding="UTF-8"?>
<upa xmlns="http://github.com/thevpc/upa/upa-1.0.xsd" version="1.0">
    <persistenceUnit name="main">
        <connection>
            <connectionString>
                derby:embedded//enisoinfodb;structure=create;userName=enisoinfouser;password='mypassword';
            </connectionString>
        </connection>
    </persistenceUnit>
</upa>
```

### 2.2.3. mysql configuration

For mysql, a valid database must be configured first. All Tables will be generated by UPA.

#### Check mysql installation
```bash
systemctl status mysql
systemctl enable mysql
systemctl start mysql

mysqladmin -u root password "<YOUR PASSWORD>"
# or (if you need to change password)
mysqladmin -u root -p'oldpassword' password "<YOUR PASSWORD>"

mysql -u root -p"<YOUR PASSWORD>"
```


#### create database and user
```sql
CREATE DATABASE enisoinfodb DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;
CREATE USER 'enisoinfouser'@'localhost' IDENTIFIED BY "<YOUR PASSWORD>";
GRANT ALL PRIVILEGES ON enisoinfodb . * TO 'enisoinfouser'@'localhost';
FLUSH PRIVILEGES;
```

#### edit upa.xml file

```xml
<?xml version="1.0" encoding="UTF-8"?>
<upa xmlns="http://github.com/thevpc/upa/upa-1.0.xsd" version="1.0">
    <persistenceUnit name="main">
        <connection>
            <connectionString>
                mysql//locahost/enisoinfodb;structure=create;userName=enisoinfouser;password='mypassword';
            </connectionString>
        </connection>
    </persistenceUnit>
</upa>
```

### 2.2.4. advanced mysql configuration
```xml
<?xml version="1.0" encoding="UTF-8"?>
<upa xmlns="http://github.com/thevpc/upa/upa-1.0.xsd" version="1.0">
    <persistenceUnit name="main">
        <connection>
            <connectionString>
                mysql://localhost/enisoinfodb;
                structure=create;
                userName=enisoinfouser;
                password='mypassword';
                pool=true;
                poolMaxSize=10;
                monitor=javamelody
            </connectionString>
        </connection>
    </persistenceUnit>
</upa>
```

### 2.3. Staring VR

#### 2.3.1. Deploying
**eniso-info-web** project is the war application to run on any Tomcat Web Container. No custom webserver configuration is needed.

#### 2.3.2. Default login/password
login    : admin
password : admin
